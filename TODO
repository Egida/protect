DONE

    Get 10gbps packet send working with AF_XDP!

    Now it's time to land the plane

    Get the xdp server processing direct packets, adding new connections, doing timeouts etc.

    Once this is done I can bring this code across to a test project and test it in-place in a real game engine.

    Fixed some issues around from address and port

    Fixed disconnect packet not getting through by changing to packet_bytes >= 18

    Server is not resetting the send sequence number for a client when it times out.

    Update hulk with https://github.com/networknext/ethernet-linux-ixgbe

    Lock in gateway eth address approach for sending out packets

    Implement env vars read by the server, where you can specify the public address and port so we can stop hard coding this.

    Default should still remain 127.0.0.1:40000 for local testing, but the env var will override this so the service is configurable.

    Same for client, env var for connect address, default 127.0.0.1

    Add an env var for the number of queues and then dynamically allocate these # of queues on the next server.

    This way we can adjust from one machine type to another. Right now the number of queues is hard coded and this is very inflexible.

    Verify that I can build and deploy easily on both linux space servers, same binary, but different server addresses and queue sizes via env vars.    

TODO

    Setup space1 server so it sends 10gbps of traffic to space2 server and see how much CPU it takes on the send side.

    ---------

    I think the completes might not be working for sends

    We are running out of send queue

        Nov 26 21:04:59 spacegame server[25567]: 0.324195: info: sent batch of 256 packets on queue 0
        Nov 26 21:04:59 spacegame server[25567]: 0.324326: info: sent batch of 256 packets on queue 0
        Nov 26 21:04:59 spacegame server[25567]: 0.324433: info: sent batch of 256 packets on queue 0
        Nov 26 21:04:59 spacegame server[25567]: 0.324550: info: sent batch of 232 packets on queue 0
        Nov 26 21:04:59 spacegame server[25567]: 0.337176: info: sent batch of 256 packets on queue 1
        Nov 26 21:04:59 spacegame server[25567]: 0.337296: info: sent batch of 256 packets on queue 1
        Nov 26 21:04:59 spacegame server[25567]: 0.337405: info: sent batch of 256 packets on queue 1
        Nov 26 21:04:59 spacegame server[25567]: 0.337511: info: sent batch of 232 packets on queue 1
        Nov 26 21:04:59 spacegame server[25567]: 0.350109: info: sent batch of 256 packets on queue 2
        Nov 26 21:04:59 spacegame server[25567]: 0.350237: info: sent batch of 256 packets on queue 2
        Nov 26 21:04:59 spacegame server[25567]: 0.350349: info: sent batch of 256 packets on queue 2
        Nov 26 21:04:59 spacegame server[25567]: 0.350469: info: sent batch of 232 packets on queue 2
        Nov 26 21:04:59 spacegame server[25567]: 0.363198: info: sent batch of 256 packets on queue 3
        Nov 26 21:04:59 spacegame server[25567]: 0.363362: info: sent batch of 256 packets on queue 3
        Nov 26 21:04:59 spacegame server[25567]: 0.363521: info: sent batch of 256 packets on queue 3
        Nov 26 21:04:59 spacegame server[25567]: 0.363670: info: sent batch of 232 packets on queue 3
        Nov 26 21:04:59 spacegame server[25567]: 0.376083: info: sent batch of 256 packets on queue 4
        Nov 26 21:04:59 spacegame server[25567]: 0.376259: info: sent batch of 256 packets on queue 4
        Nov 26 21:04:59 spacegame server[25567]: 0.376401: info: sent batch of 256 packets on queue 4
        Nov 26 21:04:59 spacegame server[25567]: 0.376544: info: sent batch of 232 packets on queue 4
        Nov 26 21:04:59 spacegame server[25567]: 0.389066: info: sent batch of 256 packets on queue 5
        Nov 26 21:04:59 spacegame server[25567]: 0.389247: info: sent batch of 256 packets on queue 5
        Nov 26 21:04:59 spacegame server[25567]: 0.389396: info: sent batch of 256 packets on queue 5
        Nov 26 21:04:59 spacegame server[25567]: 0.389542: info: sent batch of 232 packets on queue 5
        Nov 26 21:04:59 spacegame server[25567]: 0.402032: info: sent batch of 256 packets on queue 6
        Nov 26 21:04:59 spacegame server[25567]: 0.402226: info: sent batch of 256 packets on queue 6

    ---------

    Implement the map setting the public address and port, and only pass packets down to the server AF_XDP socket if they match.

    ---------

    Debug why I'm not seeing packets sent on ixgbe driver, but it's working fine on i40e driver.

    ---------

    Need to work out how to reserve CPUs cores for AF_XDP so they are available for packet processing and not taking up by game code and physics.

    ---------

    Get started integrating the new network next sockets with space game.

    ---------